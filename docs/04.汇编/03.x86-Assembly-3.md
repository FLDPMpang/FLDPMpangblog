---
title: X86汇编语言学习(三)内存控制
date: 2021-09-01 16:18:36
tags: 
  - 汇编
  - 内存管理
permalink: /pages/05567f/
categories: 
  - 汇编
---

## 内存分布

8086 可以访问 1M 的内存空间。其中 `0x00000-0x9FFFF` 属于常规内存，由内存条提供
0xF0000-0xFFFFF 由主板上的 ROM-BIOS 提供。

中间还剩余的 320KB 的空洞，即 `0xA0000-0xEFFFF`，这段空间就由外设来提供，其中就包括显卡的显存部分

### 地址

对于显存等需要使用逻辑地址访问

**逻辑地址 段地址:偏移地址**

在编译阶段,每条指令被赋予了一个汇编地址,加载到物理内存后,它在段内的偏移地址和编译时汇编地址相同

### 主扇区

主引导扇区的大小为 512 字节、ROM-BIOS 将它加载到处理器的地址空间的逻辑地址`0x0000:0x7c00`处
也就是物理地址 `0x07c00`处，然后判断最后两个字节:0x55,0xAA,说明主扇区有效

可在最后定义

```
dw 0xaa55
```

## 段

### 栈段

定义栈需要先初始化`段寄存器 SS` ,`栈指针 SP`
`栈指针 SP` 指示下一个出栈和入栈的位置

### 入栈和出栈

```
push / pop  16位寄存器或内存单元
```

## 寻址

- 寄存器寻址
- 立即寻址

### 内存寻址

- 直接寻址(使用偏移地址)
- 基址寻址(段寄存器<<4+基址寄存器 BX)
- 变址寻址(索引寄存器 SI,DI)
- 基址变址寻址(基址寄存器+索引寄存器)
